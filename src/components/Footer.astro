---
import Container from "@components/Container.astro";
import { SITE } from "@consts";
import BackToTop from "@components/BackToTop.astro";
---

<footer class="animate">
  <Container>
    <div class="relative">
      <div class="absolute right-0 -top-20">
        <BackToTop />
      </div>
    </div>
    <div class="flex justify-between items-center">
      <div>
        &copy; 2024 {`|`} {SITE.NAME}
      </div>
      <div class="flex items-center gap-2">
        <label class="switch">
          <input 
            type="checkbox"
            class="theme-controller"
          />
          <span class="slider">
            <svg
              class="sun-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round">
              <circle cx="12" cy="12" r="5" />
              <path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
            </svg>
            <svg
              class="moon-icon" 
              xmlns="http://www.w3.org/2000/svg"
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 A7 7 0 0 0 21 12.79z"></path>
            </svg>
          </span>
        </label>
      </div>
    </div>
  </Container>
</footer>

    <style>
      .switch {
        position: relative;
        display: inline-block;
        width: 44px;
        height: 24px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        border-radius: 34px;
        transition: 0.4s;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        border-radius: 50%;
        transition: 0.4s;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        z-index: 1;
      }

      input:checked + .slider {
        background-color: #09090b;
      }

      input:checked + .slider:before {
        transform: translateX(20px);
      }

      .sun-icon,
      .moon-icon {
        position: absolute;
        top: 5px;
        color: #09090b;
        transition: 0.4s;
        z-index: 2;
      }

      .sun-icon {
        left: 5px;
        opacity: 1;
      }

      .moon-icon {
        right: 5px;
        opacity: 0;
      }

      input:checked ~ .slider .sun-icon {
        opacity: 0;
      }

      input:checked ~ .slider .moon-icon {
        opacity: 1;
      }

      .slider:hover:before {
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
      }
    </style>

    <script>
      const themeController = document.querySelector('.theme-controller') as HTMLInputElement;

      themeController.checked = document.documentElement.getAttribute('data-theme') === 'dark';

      themeController.addEventListener('change', (e) => {
        const target = e.target as HTMLInputElement;
        if (target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
        } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
        }
      });
    </script>